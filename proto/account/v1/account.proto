syntax = "proto3";
package account.v1;

import "account/v1/role.proto";
import "google/api/annotations.proto";
import "google/api/httpbody.proto";
// import "google/protobuf/duration.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

message Account {
  string sub = 1;
  string email = 2;
  string username = 3;
  repeated Role roles = 4;

  google.protobuf.Timestamp created_at = 5;
  google.protobuf.Timestamp updated_at = 6;
  google.protobuf.Timestamp last_login = 7;
}

service AccountService {
  rpc CurrentAccount(CurrentAccountRequest) returns (CurrentAccountResponse) {
    option (google.api.http) = {
      get : "/v1/{tenant}/accounts/{scope}/me"
    };
  };
  rpc CurrentAccountResource(CurrentAccountResourceRequest)
      returns (CurrentAccountResourceResponse) {
    option (google.api.http) = {
      get : "/v1/{tenant}/accounts/{scope}/resources/{resource}/me"
    };
  }
}

message CurrentAccountRequest {
  string tenant = 1;
  Scope scope = 2;
}
message CurrentAccountResponse { Account account = 1; }

message CurrentAccountResourceRequest {
  string tenant = 1;
  Scope scope = 2;
  string resource = 3;
}
message CurrentAccountResourceResponse { Account account = 1; }